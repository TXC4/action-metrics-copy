<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Action Metrics</title>

    <link
      href="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css"
      rel="stylesheet"
      id="bootstrap-css"
    />
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
  </head>
  <body style="padding-top: 70px">
    <% var parsedData = data; %>

    <!--Navbar-->
    <nav
      class="navbar fixed-top navbar-expand-lg navbar-dark"
      style="background-color: black"
    >
      <a class="navbar-brand" href="#">Action Metrics</a>
      <button
        class="navbar-toggler"
        type="button"
        data-toggle="collapse"
        data-target="#navbarNavAltMarkup"
        aria-controls="navbarNavAltMarkup"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <span class="navbar-toggler-icon"></span>
      </button>
        <div class="navbar-nav ml-auto">
          <!--user form for date filtering-->
          <form action="/stats" method="post">
            <span style="color: white">Count Start: </span>
            <input
              style="margin-right: 30px"
              type="date"
              id="minDate"
              name="minDate"
              value="<%=parsedData.minDate%>"
            />
            <input
              type="date"
              id="minShowDate"
              name="minShowDate"
              value="<%=parsedData.minShowDate%>"
            />
            <input
              type="date"
              id="maxDate"
              name="maxDate"
              value="<%=parsedData.maxDate%>"
            />
            <input type="submit" class="btn" value="Go" />
          </form>
        </div>
      </div>
    </nav>

    <table class="table table-striped table-dark">
      <thead>
        <tr>
          <th scope="col">Date</th>
          <th scope="col"># of WOs Opened Today</th>
          <th scope="col"># of WOs Closed Today</th>
          <th scope="col">WOs Closed Today</th>
          <th scope="col">Total Open WOs</th>
        </tr>
      </thead>

      <tbody>
        <%for (var val of parsedData){ %>
        <tr>
          <td><%=val.date.slice(0,10)%></td>
          <td><%=val.openedCount%></td>
          <td><%=val.closedCount%></td>
          <td><%=val.closedList%></td>
          <td><%=val.currentlyOpenCount%></td>
        </tr>
        <%}%>
      </tbody>
    </table>

    <script></script>
  </body>
</html>
